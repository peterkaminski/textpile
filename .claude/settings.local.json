{
  "permissions": {
    "allow": [
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nInitial Textpile implementation\n\n- Cloudflare Pages + Functions + KV architecture\n- Public HTML/CSS files for TOC and submit form\n- API endpoints for index, submit, and remove\n- Post rendering with client-side Markdown\n- Non-attributed posting with auto-expiration support\n- Comprehensive documentation \\(README, User''s Guide, Installation\\)\n- MIT License\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git tag:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nImplement critical fixes and enhancements \\(v0.2.0\\)\n\nHIGH PRIORITY FIXES:\n- Implement auto-expiration with user-selected retention windows\n  - Added retention period selector \\(1 week to 1 year\\) in submit form\n  - KV entries now use expirationTtl for automatic deletion\n  - Index filters out expired items at read time\n  - Expired posts return 410 Gone with explanation page\n- Fix ID generation bug \\(removed no-op .replace\\(\"Z\", \"Z\"\\)\\)\n- Fix redundant KV fetches \\(reduced from 3 to 1 call in post view\\)\n\nMEDIUM PRIORITY FIXES:\n- Add timing-safe token comparison to prevent timing attacks\n  - Implemented in both submit.js and remove.js\n  - Uses crypto.subtle when available, fallback to XOR comparison\n- Fix XSS vulnerability in index.html \\(escape URL in href\\)\n- Document race condition in index updates \\(acceptable for low-traffic\\)\n\nLOW PRIORITY ENHANCEMENTS:\n- Add client-side form validation for body field\n- Standardize API error responses \\(consistent format with success field\\)\n- Add styling for select elements\n- Document CORS considerations in CLAUDE.md\n\nDOCUMENTATION:\n- Added comprehensive CORS documentation\n- Added race condition analysis and mitigation options\n- Updated security considerations section\n\nBreaking changes: None \\(backwards compatible\\)\nAPI changes: Added ''expiry'' parameter to submit endpoint \\(defaults to 1month\\)\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(authors keep their own records\"\n  - Links to /about for full details\n- Updated submit page disclosure:\n  - \"No author identity is collected. IP addresses are logged.\"\n  - Clear link to /about before submission\n- Created /about page with comprehensive use notes:\n  - What Textpile is / is not\n  - Attribution and identity policies\n  - Retention and expiration details\n  - Use expectations\n  - Operation and shutdown policy\n\nFOOTER IMPROVEMENTS:\n- New footer format across all pages:\n  - \"This is an instance of Textpile {version}, operated by {email}.\"\n  - Links to GitHub repository\n  - Shows version number \\(0.3.0\\)\n  - Shows operator email if configured\n  - Footer always shown \\(even without ADMIN_EMAIL\\)\n- Converted post view to use client-side footer \\(removed renderFooter function\\)\n- All pages use initPage\\(\\) from textpile-utils.js\n\nCOPY URL FEATURE:\n- Added \"Copy URL\" button to post view \\(after \"Copy text\"\\)\n- Copies current post URL to clipboard\n- Shows \"URL copied!\" confirmation message\n- Uses same feedback mechanism as copy text\n\nCONFIGURATION DOCUMENTATION:\n- Created comprehensive CONFIGURATION.md:\n  - Complete reference for all 10 environment variables\n  - Organized by category \\(Identity, Access Control, Retention, etc.\\)\n  - Includes defaults, examples, and best practices\n  - Quick reference table\n  - Security and troubleshooting guidance\n- Updated INSTALLATION.md to reference CONFIGURATION.md\n- Simplified installation guide with link to full config docs\n\nLICENSE:\n- Added Use Notice \\(non-binding\\) section\n- Clarifies intended use and expectations\n- Notes prohibition on illegal activity / causing harm\n- Establishes no implied content responsibility\n\nTECHNICAL CHANGES:\n- functions/api/config.js: Added instanceName and textpileVersion\n- public/textpile-utils.js:\n  - Added updatePageTitle\\(\\) function\n  - Added updateH1WithInstanceName\\(\\) function\n  - Updated addFooter\\(\\) with new format\n  - Modified initPage\\(\\) to accept options \\(pageTitle, updateH1\\)\n- functions/p/[id].js:\n  - Removed server-side renderFooter function\n  - Converted to client-side footer via initPage\n  - Added Copy URL button and handler\n  - Removed unused adminEmail variable\n\nFILES CREATED:\n- public/about.html \\(comprehensive use notes\\)\n- CONFIGURATION.md \\(environment variable reference\\)\n- IMPROVED-COPY.md \\(copy improvements documentation\\)\n\nFILES MODIFIED:\n- functions/api/config.js\n- functions/p/[id].js\n- public/index.html\n- public/submit.html\n- public/textpile-utils.js\n- INSTALLATION.md\n- LICENSE\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")"
    ]
  }
}
